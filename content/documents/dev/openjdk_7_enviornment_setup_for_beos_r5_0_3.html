+++
type = "article"
title = "OpenJDK 7 Environment Setup for BeOS R5.0.3"
date = "2008-01-04T05:14:16.000Z"
tags = ["Haiku", "OpenJDK", "environment"]
+++


    <div class="field field-type-text field-field-body">
    <div class="field-items">
            <div class="field-item odd">
                    <p>This document outlines the steps for installing and configuring an environment on BeOS R5 suitable for preliminary work on the OpenJDK 7 port to Haiku. This document, like the foundation for our porting effort is currently a work in progress.</p>
<h3>Requirements to access OpenJDK's Mercurial Repository</h3>
<h4>Python 2.4</h4>
<p>This <a href="http://www.bebits.com/app/4232" rel="nofollow">Python package from bebits</a> works well on R5.<br />
Follow the instructions to install it. It's not the cleanest install in the world, (I don't like<br />
the ~/bin and ~/lib) but it works. Clearly in the future we need to port Python to Haiku, so<br />
perhaps it's time someone take a stab at it.</p>
<h4>Mercurial</h4>
<p>This slightly <a href="http://bryan.varnernet.com/files/mercurial-ea1016b32e94-BeOS-patched.zip" rel="nofollow"> patched, 'stable' snapshot of Mercurial</a> will build and install on BeOS R5. Follow the <a href="http://www.selenic.com/mercurial/wiki/index.cgi/UnixInstall" rel="nofollow">UnixInstall</a><br />
process for a Per-user installation. Instead of adding the exports to <span class="geshifilter"><code class="cpp geshifilter-cpp">~<span style="color: #000040;">/</span>.<span style="color: #007788;">bashrc</span></code></span>,<br />
I would recommend adding them to <span class="geshifilter"><code class="cpp geshifilter-cpp">~<span style="color: #000040;">/</span>.<span style="color: #007788;">profile</span></code></span>. Before testing your new install,<br />
create <span class="geshifilter"><code class="cpp geshifilter-cpp">~<span style="color: #000040;">/</span>.<span style="color: #007788;">hgrc</span></code></span> and add the following contents:</p>
<pre>
[ui]
username = -your-email-address-here-
</pre></p>
<p>For those curious, the patch removes the check for file descriptors to be sockets. This was necessary on R5, and involved commenting out two lines. After that, mercurial built just fine.</p>
<h4>Mercurial Forest Extension</h4>
<p>The forest extension will need to be downloaded (from a mercural repo!) and then added to your <span class="geshifilter"><code class="cpp geshifilter-cpp">~<span style="color: #000040;">/</span>.<span style="color: #007788;">hgrc</span></code></span> file as an extension.</p>
<ol>
<li>hg clone <a href="http://hg.akoha.org/hgforest/" title="http://hg.akoha.org/hgforest/">http://hg.akoha.org/hgforest/</a> hgforest</li>
<li>Add the following to your ~/.hgrc file<br />
<pre>
[extensions]
hgext.forest = /path/to/cloned/hgforest/forest.py
</pre></li>
</ol>
</p>
<h3>Getting the JDK7 code</h3>
<p>Once we have a real sub-project over at the OpenJDK (soon, if all goes well), these instructions will likely change, as we should have our own repository. That said, to satiate the desire of the hungry developers out there (like myself) a good way to familiarize yourself with the OpenJDK code is to checkout the full JDK7 repository. Referr to <a href="http://weblogs.java.net/blog/kellyohair/archive/2007/12/openjdk_mercuri_7.html" rel="nofollow">this post on Kelly O'Hair's blog</a>.<br />
Or, for the impatient</p>
<pre>
hg fclone <a href="http://hg.openjdk.java.net/jdk7/jdk7" title="http://hg.openjdk.java.net/jdk7/jdk7">http://hg.openjdk.java.net/jdk7/jdk7</a> yourjdk7
cd yourjdk7
</pre><p>
This will take a very, very long time. Be Patient.
</p>
        </div>
        </div>
</div>
  